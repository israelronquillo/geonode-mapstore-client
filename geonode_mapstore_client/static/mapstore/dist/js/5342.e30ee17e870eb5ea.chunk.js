"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5342],{474916:(e,r,n)=>{n.d(r,{Z:()=>u});var t=n(558422),a=n.n(t),l=n(45697),o=n.n(l),c=["href","readOnly","children"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(null,arguments)}function i(e){var r=e.href,n=e.readOnly,t=e.children,l=function(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.includes(t))continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],r.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c);return n?t:a().createElement("a",s({href:r},l),t)}i.propTypes={href:o().string,readOnly:o().bool.isRequired,children:o().any},i.defaultProps={href:"",readOnly:!1};const u=i},834065:(e,r,n)=>{n.d(r,{Z:()=>m});var t=n(558422),a=n.n(t),l=n(45697),o=n.n(l),c=n(877593),s=n(474916),i=["resource","readOnly","formatHref","pathname"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},u.apply(null,arguments)}function d(e){var r,n,t,l=e.resource,o=e.readOnly,d=e.formatHref,m=e.pathname,f=function(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.includes(t))continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],r.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return f.detailsPanel?a().createElement(s.Z,{readOnly:o,href:d({pathname:m,query:{"filter{owner.username.in}":null===(t=l.owner)||void 0===t?void 0:t.username}})},l.owner&&(0,c.vW)(l.owner)):a().createElement("p",u({className:"card-text gn-card-user"},f),(null===(r=l.owner)||void 0===r?void 0:r.avatar)&&a().createElement("img",{src:l.owner.avatar,alt:(0,c.vW)(l.owner),className:"gn-card-author-image"}),a().createElement(s.Z,{readOnly:o,href:d({pathname:m,query:{"filter{owner.username.in}":null===(n=l.owner)||void 0===n?void 0:n.username}})},l.owner&&(0,c.vW)(l.owner)))}d.propTypes={resource:o().object,readOnly:o().bool,formatHref:o().func,props:o().any},d.defaultProps={resource:{},readOnly:!1,formatHref:function(){return"#"}};const m=d},629987:(e,r,n)=>{n.d(r,{Z:()=>c});var t=n(558422),a=n.n(t),l=n(271418);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},o.apply(null,arguments)}l.Lt.Item=l.sN,l.Lt.Divider=function(e){return a().createElement(l.sN,o({},e,{divider:!0}))};const c=l.Lt},205342:(e,r,n)=>{n.d(r,{Z:()=>w});var t=n(558422),a=n.n(t),l=n(805346),o=n(507412),c=n(693473),s=n(51605),i=n(535721),u=n(138241),d=n(474916),m=n(834065),f=n(45697),p=n.n(f),v=n(629987);function g(e){var r,n,c=e.options,s=e.resource,i=e.buildHrefByTemplate,u=(0,t.useRef)(),d="gn-card-dropdown",m=null==u||null===(r=u.current)||void 0===r?void 0:r.querySelector(".".concat(d)),f=0===((null==m||null===(n=m.children)||void 0===n?void 0:n.length)||0);return a().createElement("div",{ref:u,className:"gn-resource-action-buttons",onClick:function(e){return e.stopPropagation()},style:f?{display:"none"}:{}},a().createElement(v.Z,{className:"gn-card-options",pullRight:!0,id:"gn-card-options-".concat(s.pk2||s.pk)},a().createElement(v.Z.Toggle,{variant:"default",size:"sm",noCaret:!0},a().createElement(o.Z,{name:"ellipsis-v"})),a().createElement(v.Z.Menu,{className:d},c.map((function(e){if("plugin"===e.type){var r=e.Component;return a().createElement(r,{key:e.action,resource:s,renderType:"menuItem"})}return a().createElement(v.Z.Item,{key:e.href,href:i(s,e.href)},a().createElement(o.Z,{name:e.icon})," ",a().createElement(l.Z,{msgId:e.labelId}))})))))}g.propTypes={options:p().array,resource:p().object,buildHrefByTemplate:p().func},g.defaultProps={options:[],resource:{},buildHrefByTemplate:function(){}};const y=g;var h=n(30762);function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}var E=(0,t.forwardRef)((function(e,r){var n,f,p,v,g=e.data,E=e.active,w=e.options,O=e.formatHref,Z=e.getTypesInfo,N=e.layoutCardsStyle,P=e.buildHrefByTemplate,I=e.readOnly,k=e.className,j=e.loading,H=e.featured,T=e.onClick,A=e.downloading,_=e.getDetailHref,S=void 0===_?function(e){return O({query:{d:"".concat(e.pk,";").concat(e.resource_type).concat(e.subtype?";".concat(e.subtype):"")},replaceQuery:!0,excludeQueryKeys:[]})}:_,C=(0,t.useRef)(),q=g,B=Z(),R=(B[q.subtype]||B[q.resource_type]||{}).icon,x=q&&(B[q.subtype]||B[q.resource_type])||{},D=x.formatDetailUrl,L=void 0===D?function(e){return null==e?void 0:e.detail_url}:D,W=x.canPreviewed,M=x.hasPermission,Q=(null==q?void 0:q.pk)&&L(q),U=(null==q?void 0:q.pk)&&W&&W(q),z=(null==q?void 0:q.pk)&&M&&M(q),F=(null==q?void 0:q.pk)&&(0,i.J7)(q),J=(n=(0,t.useState)(!1),f=2,function(e){if(Array.isArray(e))return e}(n)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,l,o,c=[],s=!0,i=!1;try{if(l=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;s=!1}else for(;!(s=(t=l.call(n)).done)&&(c.push(t.value),c.length!==r);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(n,f)||function(e,r){if(e){if("string"==typeof e)return b(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,r):void 0}}(n,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),K=J[0],$=J[1],G="list"===N,V=G?"card-img-left":"card-img-top";return a().createElement("div",{ref:r,onClick:function(){T(g)},className:"gn-resource-card".concat(E?" active":"").concat(I?" read-only":""," gn-card-type-").concat(N," ").concat(G?"rounded-0":"").concat(k?" ".concat(k):"")},!I&&a().createElement("a",{className:"gn-resource-card-link",href:S(q)}),!I&&w&&w.length>0&&!G&&a().createElement(y,{buildHrefByTemplate:P,resource:q,options:w,readOnly:I}),a().createElement("div",{className:"card-resource-".concat(N)},K||!q.thumbnail_url?a().createElement("div",{className:"".concat(V," card-img-placeholder")},a().createElement(o.Z,{name:R})):a().createElement("img",{className:V,src:q.thumbnail_url,onError:function(){return $(!0)}}),a().createElement("div",{className:"gn-resource-card-body-wrapper"},a().createElement("div",{className:"card-body"},a().createElement("div",{className:"card-title"},a().createElement("div",null,R&&!j&&!A&&a().createElement(a().Fragment,null,a().createElement(d.Z,{readOnly:I,href:O({query:{f:q.resource_type}})},a().createElement(o.Z,{name:R}))),(j||A)&&a().createElement(s.Z,null),a().createElement(d.Z,{className:H?"gn-featured-card-title":"gn-card-title",readOnly:I,href:S(q)},q.title)),a().createElement("div",null,a().createElement(u.Z,{resource:q})),a().createElement("div",null,a().createElement(h.Z,{resource:q}))),a().createElement("p",{ref:C,className:"card-text gn-card-description ".concat(N)},q.raw_abstract?q.raw_abstract:"..."),G&&(null==C||null===(p=C.current)||void 0===p?void 0:p.clientHeight)<(null==C||null===(v=C.current)||void 0===v?void 0:v.scrollHeight)?a().createElement("span",{className:"ellipsis"},"..."):null,!I&&w&&w.length>0&&G&&a().createElement(y,{buildHrefByTemplate:P,resource:q,options:w,readOnly:I})),a().createElement("div",{className:"gn-footer-wrapper"},a().createElement("div",{className:"gn-card-footer",style:{padding:w&&0===w.length?"0 0.25rem 0 0.5rem":"0 0.5rem"}},a().createElement(m.Z,{resource:q,readOnly:I,formatHref:O}),a().createElement("div",{className:"gn-card-actions"},!I&&(Q||F)&&a().createElement("div",{className:"".concat(w&&0===w.length?"gn-card-view-editor-right":"gn-card-view-editor")},a().createElement(c.Z,{variant:"primary",href:U||z?Q:F,rel:"noopener noreferrer"},a().createElement(l.Z,{msgId:"gnhome.view"})))))))))}));E.defaultProps={links:[],theme:"light",getTypesInfo:i.s2,formatHref:function(){return"#"},featured:!1,onClick:function(){}};const w=E},138241:(e,r,n)=>{n.d(r,{Z:()=>g});var t=n(558422),a=n.n(t),l=n(805346),o=n(45697),c=n.n(o),s=n(507412),i=n(815135),u=n(441609),d=n.n(u),m=n(535721),f=n(693473),p=(0,i.Z)(f.Z),v=function(e){var r,n,t,o=e.resource,c=void 0===o?{}:o,i=(0,m.fu)(c),u=i.isApproved,f=i.isPublished,v=i.isProcessing,g=i.isCopying,y=i.isDeleting,h=i.isDeleted;return d()(c)?null:a().createElement("p",{className:"gn-resource-status-text"},!v&&(!u||!f)&&a().createElement(p,{variant:"default",className:"gn-resource-status gn-status-button",tooltip:(r={isApproved:u,isPublished:f},n=r.isApproved,t=r.isPublished,!n&&t?a().createElement(l.Z,{msgId:"gnhome.pendingApproval"}):n||t?t||n?"":a().createElement(l.Z,{msgId:"gnhome.unpublished"}):a().createElement(l.Z,{msgId:"gnhome.unApprovedunPublished"})),style:{marginRight:(y||h||g)&&"0.4rem"},tooltipPosition:"top"},a().createElement(s.Z,{name:"info-circle",className:"gn-resource-status-pending"})),y&&a().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},a().createElement(l.Z,{msgId:"gnviewer.deleting"})),h&&a().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},a().createElement(l.Z,{msgId:"gnviewer.deleted"})),g&&a().createElement("span",{className:"gn-resource-status gn-resource-status-primary"},a().createElement(l.Z,{msgId:"gnviewer.cloning"})))};v.propTypes={isApproved:c().bool,isPublished:c().bool},v.defaultProps={isApproved:!0,isPublished:!0};const g=v},30762:(e,r,n)=>{n.d(r,{Z:()=>d});var t=n(558422),a=n.n(t),l=n(414293),o=n.n(l),c=n(815135),s=n(17594);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},i.apply(null,arguments)}var u=(0,c.Z)((function(e){return a().createElement("div",i({},e,{className:"gn-unadvertised"}),a().createElement(s.Z,{name:"eye-slash"}))}));const d=function(e){var r=e.resource;return o()(r.advertised)||r.advertised?null:a().createElement(u,{tooltipId:"gnviewer.unadvertised",className:"gn-unadvertised"})}}}]);